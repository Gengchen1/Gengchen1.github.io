### 3.3.1 Ignition Gazebo安装与运行

#### 1.安装

Ignition Gazebo 是不依赖于ROS2的一个独立的项目，可以独自安装。但是如果安装了ROS2，在ROS2存储库中已经集成了对应版本的 Ignition Gazebo，可以调用如下指令直接安装：

```
sudo apt install ros-${ROS_DISTRO}-ros-gz
```

#### 2.运行

Ignition Gazebo 安装完毕之后，可以通过两种方式启动。

方式1，以Ignition Gazebo 的方式启动，指令如下：

```
ign gazebo
```

方式2，以ROS2的方式 启动，指令如下 ：

```
ros2 launch ros_gz_sim gz_sim.launch.py
```

二者运行结果一致，如下图所示：在弹出窗口中，选择仿真环境然后点击`run`按钮即可运行。

![](/assets/3.3.1Gazebo运行.PNG)

#### 3.界面介绍

接下来以Empty仿真环境为例，介绍一下Ignition Gazebo的界面组成。

![](/assets/3.3.1_界面介绍.PNG)

##### 工具栏

* 顶部的工具栏包含两个按钮，左侧的文件菜单按钮（水平条纹）和右侧的插件按钮（垂直省略号）。
* 文件菜单按钮包含将仿真环境保存到文件、保存和加载界面配置以及自定义界面样式等设置。
* 插件按钮列出了所有可用的插件。点击后会弹出插件列表，向下滚动此列表以查看所有插件。 当选择一个时，其界面将出现在右侧面板中。

##### 3D视窗

* 左上方工具栏包含多种几何体（球体、框体、圆柱体）按钮和变换控件。通过集合体按钮可以直接将盒子、球体或圆柱体模型插入仿真环境。只需单击要插入的形状，然后将其放入环境中。该形状将自动捕捉到地平面上。
* 主视图会显示仿真环境，我们可以通过鼠标以不同方式来导航场景，相关操作如下：

  ```
  左键单击：选择实体
  右键单击：打开带有选项的菜单：
     Move to：移动到以实体为中心的场景
     Follow：选择一个实体让视图保持居中，无论是移动还是平移
     Remove：从模拟中删除实体
     Copy：复制实体
     Past: 粘贴实体
     View：显示实体的重心（Center of Mass）、碰撞边界（Collisions）、惯性（Inertia）、
           关节（Joints）、坐标系（Frames）、透明度（Transparent）、线框（Wireframe）等属性
  左键单击并拖动：在场景中平移
  右键单击并拖动：放大和缩小
  滚轮向前/向后：放大和缩小
  滚轮单击并拖动：旋转场景
  ```

* 在视窗的底部，从左到右分别是是播放、步长按钮和实时因子（Real-Time Factor，RTF）。点击播放按钮将开始运行仿真环境， 再次点击可以暂停运行。步长按钮用于设置仿真时间的离散单位，可以通过将鼠标悬停在按钮上来自定义步长。实时因子表示仿真运行速度相对于真实时间的比例。

##### 右侧面板

右侧面板用于显示插件，当前仿真环境默认包含两个插件：Model和Entity Tree。

* Entity Tree 中会显示仿真环境中的实体列表；
* 点击Entity Tree中的实体后，可以在Model中显示该实体的相关信息。也可以按住 Ctrl 并单击以选择多个实体；
* 还可以右键单击任何插件以打开基本设置或关闭。

在Ignition Gazebo中内置了许多插件，可以点击工具栏的右侧按钮自行添加，比如：可以选择 Grid Config 插件调整世界网格的特征，包括单元格大小、网格位置、单元格计数、或颜色等。

![](/assets/3.3.1_网格插件.PNG)

后期随着应用的深入，也会陆续介绍其他一些插件。

